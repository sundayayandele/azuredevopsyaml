trigger: none  # This pipeline should not trigger automatically

parameters:
  environment: 'production'
  deploymentRegion: 'us-east'
  ns1: false
  ns2: false

stages:
  - ${{ if eq(parameters.ns1, true) }}:
      - stage: TriggerPower1
        displayName: "Trigger Power1 Pipeline"
        jobs:
          - job: TriggerPower1Job
            steps:
              - script: echo "##vso[build.queue name=Power1; parameters.environment=${{ parameters.environment }}; parameters.deploymentRegion=${{ parameters.deploymentRegion }}]"

  - ${{ if eq(parameters.ns2, true) }}:
      - stage: TriggerPower2
        displayName: "Trigger Power2 Pipeline"
        jobs:
          - job: TriggerPower2Job
            steps:
              - script: echo "##vso[build.queue name=Power2; parameters.environment=${{ parameters.environment }}; parameters.deploymentRegion=${{ parameters.deploymentRegion }}]"









---------------------------------------

trigger: none  # This pipeline should not trigger automatically

resources:
  repositories:
    - repository: self  # This tells Azure DevOps to use the same repository

parameters:
  environment: 'production'
  deploymentRegion: 'us-east'

stages:
  - stage: TriggerPower1
    displayName: "Trigger Power1 Pipeline"
    jobs:
      - job: TriggerPower1Job
        steps:
          - script: echo "Triggering Power1 Pipeline"
          - script: |
              echo "##vso[build.queue name=power1.yaml;parameters.environment=${{ parameters.environment }};parameters.deploymentRegion=${{ parameters.deploymentRegion }}]"
  
  - stage: TriggerPower2
    displayName: "Trigger Power2 Pipeline"
    dependsOn: TriggerPower1  # Ensure Power2 runs only after Power1
    jobs:
      - job: TriggerPower2Job
        steps:
          - script: echo "Triggering Power2 Pipeline"
          - script: |
              echo "##vso[build.queue name=power2.yaml;parameters.environment=${{ parameters.environment }};parameters.deploymentRegion=${{ parameters.deploymentRegion }}]"







-----------------------------+

trigger: none  # The orchestrator does not trigger automatically

resources:
  pipelines:
    - pipeline: Power1Pipeline
      source: Power1
      trigger: none  # Ensure this pipeline doesn't trigger automatically

    - pipeline: Power2Pipeline
      source: Power2
      trigger: none  # Ensure this pipeline doesn't trigger automatically

parameters:
  environment: 'production'
  deploymentRegion: 'us-east'

stages:
  - stage: TriggerPower1
    displayName: "Trigger Power1 Pipeline"
    jobs:
      - job: TriggerPower1Job
        steps:
          - script: echo "Triggering Power1 Pipeline"
          - script: |
              echo "##vso[build.queue name=Power1;parameters.environment=${{ parameters.environment }};parameters.deploymentRegion=${{ parameters.deploymentRegion }}]"
  
  - stage: TriggerPower2
    displayName: "Trigger Power2 Pipeline"
    dependsOn: TriggerPower1
    jobs:
      - job: TriggerPower2Job
        steps:
          - script: echo "Triggering Power2 Pipeline"
          - script: |
              echo "##vso[build.queue name=Power2;parameters.environment=${{ parameters.environment }};parameters.deploymentRegion=${{ parameters.deploymentRegion }}]"